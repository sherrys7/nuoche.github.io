<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¾¿æ°‘æŒªè½¦æœåŠ¡</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'PingFang SC', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .car-icon {
    font-size: 3.5em;
    margin-bottom: 15px;
    animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    }
    
    .header {
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      color: white;
      text-align: center;
      padding: 30px 20px;
    }
    
    .header h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .car-info {
      text-align: center;
      padding: 30px 20px;
    }
    
    .license-plate {
      display: inline-block;
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      color: white;
      font-size: 28px;
      font-weight: bold;
      padding: 15px 30px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
    }
    
    .message {
      color: #666;
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 30px;
    }
    
    .actions {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      padding: 0 20px 30px;
    }
    
    .action-btn {
      flex: 1;
      min-width: 120px;
      padding: 15px 20px;
      border-radius: 50px;
      text-align: center;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .call-btn {
      background: linear-gradient(45deg, #2ecc71, #27ae60);
      color: white;
    }
    
    .sms-btn {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
    }
    
    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }
    
    .action-btn:active {
      transform: translateY(-1px);
    }
    
    .joke-section, .sentence-section {
      background: #f8f9fa;
      padding: 30px 20px;
      border-top: 1px solid #eee;
    }
    
    .section-title {
      text-align: center;
      color: #333;
      font-size: 20px;
      margin-bottom: 20px;
      position: relative;
    }
    
    .section-title::after {
      content: '';
      display: block;
      width: 50px;
      height: 3px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      margin: 10px auto;
      border-radius: 2px;
    }
    
    .joke-type, .sentence-type {
      text-align: center;
      color: #ff6b6b;
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 15px;
    }
    
    .joke-item, .sentence-item {
      background: white;
      padding: 20px;
      margin-bottom: 15px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      border-left: 4px solid #4ecdc4;
    }
    
    .sentence-content {
      font-size: 1.2rem;
      line-height: 1.6;
      color: #495057;
      text-align: center;
    }
    
    .author {
      text-align: right;
      margin-top: 15px;
      font-style: italic;
      color: #6c757d;
    }
    
    .source {
      text-align: right;
      margin-top: 10px;
      font-style: italic;
      color: #495057;
      font-size: 0.9rem;
    }
    
    .joke-item:last-child, .sentence-item:last-child {
      margin-bottom: 0;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
      color: #666;
    }
    
    .error {
      color: #e74c3c;
    }
    
    .refresh-btn {
      display: block;
      width: 80%;
      margin: 20px auto;
      padding: 12px;
      background: linear-gradient(45deg, #6c5ce7, #a29bfe);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .refresh-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid #dee2e6;
    }
    
    .tab {
      flex: 1;
      text-align: center;
      padding: 12px;
      cursor: pointer;
      font-weight: bold;
      color: #6c757d;
      background: #e9ecef;
      transition: all 0.3s ease;
    }
    
    .tab:first-child {
      border-radius: 10px 0 0 0;
    }
    
    .tab:last-child {
      border-radius: 0 10px 0 0;
    }
    
    .tab.active {
      background: #f8f9fa;
      color: #ff6b6b;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .footer {
      text-align: center;
      padding: 20px;
      color: #999;
      font-size: 14px;
      background: #f8f9fa;
      border-top: 1px solid #eee;
    }
    
    @media (max-width: 480px) {
      .actions {
        flex-direction: column;
        align-items: center;
      }
      
      .action-btn {
        width: 80%;
      }
      
      .license-plate {
        font-size: 24px;
        padding: 12px 25px;
      }
      
      .sentence-content {
        font-size: 1rem;
      }
      
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="car-icon">ğŸš—</div>
      <h1>ä¸´æ—¶é©»è½¦ï¼Œç”µè”å³èµ°ï¼</h1>
      <p>æ‰«ç è”ç³»è½¦ä¸»ï¼Œå®‰å…¨ä¾¿æ·</p>
  </div>
    
    <div class="car-info">
      <div class="license-plate">è‹JÂ·*****</div>
      <div class="message">
        å¾ˆæŠ±æ­‰ç»™æ‚¨å¸¦æ¥ä¸ä¾¿<br>
        è¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼é€šçŸ¥æŒªè½¦ï¼Œè°¢è°¢ï¼
      </div>
    </div>
    
    <div class="actions">
      <a class="action-btn call-btn" href="tel:19974825173">
        ğŸ“ ç”µè¯é€šçŸ¥
      </a>
      <a class="action-btn sms-btn" href="sms:19974825173;?&body=ä½ å¥½ï¼Œè½¦è¾†è¢«æŒ¡ï¼Œè¯·å°½å¿«æŒªè½¦ï¼Œè°¢è°¢ï¼">
        ğŸ’¬ çŸ­ä¿¡é€šçŸ¥
      </a>
    </div>
    
    <div class="tabs">
      <div class="tab active" data-tab="joke">ç¬‘è¯</div>
      <div class="tab" data-tab="sentence">å¥å­</div>
    </div>
    
    <div class="tab-content active" id="joke-tab">
      <div class="joke-section">
        <div class="section-title">å€™è½¦ä¸€åˆ»ï¼Œå¼€å¿ƒä¸€ç¬‘</div>
        <div id="joke-type" class="joke-type">ç±»å‹: æœªçŸ¥</div>
        <div id="joke-container">
          <div class="loading">æ­£åœ¨åŠ è½½ç¬‘è¯...</div>
        </div>
        <button id="refresh-joke" class="refresh-btn">ğŸ² æ¢ä¸ªç¬‘è¯</button>
      </div>
    </div>
    
    <div class="tab-content" id="sentence-tab">
      <div class="sentence-section">
        <div class="section-title">æ¯æ—¥ä¸€å¥ï¼Œæ„Ÿæ‚Ÿäººç”Ÿ</div>
        <div id="sentence-type" class="sentence-type">ç±»å‹: æœªçŸ¥</div>
        <div id="sentence-container">
          <div class="loading">æ­£åœ¨åŠ è½½å¥å­...</div>
        </div>
        <button id="refresh-sentence" class="refresh-btn">ğŸŒŸ æ¢ä¸ªå¥å­</button>
      </div>
    </div>
    
    <div class="footer">
      Â© ä¾¿æ°‘æœåŠ¡ | æ–‡æ˜å‡ºè¡Œ ä»æˆ‘åšèµ·
      <br>éœ€è¦åŒæ¬¾è¯·è”ç³»å½“å‰ç”µè¯
    </div>
    
  </div>

  <script>
    // ç±»å‹æ˜ å°„
    const typeMap = {
      'a': 'åŠ¨ç”»',
      'b': 'æ¼«ç”»',
      'c': 'æ¸¸æˆ',
      'd': 'æ–‡å­¦',
      'e': 'åŸåˆ›',
      'f': 'ç½‘ç»œ',
      'g': 'å…¶ä»–',
      'h': 'å½±è§†',
      'i': 'è¯—è¯',
      'j': 'ç½‘æ˜“äº‘',
      'k': 'å“²å­¦',
      'l': 'æŠ–æœºçµ'
    };
    
    // DOMå…ƒç´ 
    const jokeContainer = document.getElementById('joke-container');
    const jokeTypeEl = document.getElementById('joke-type');
    const refreshJokeBtn = document.getElementById('refresh-joke');
    
    const sentenceContainer = document.getElementById('sentence-container');
    const sentenceTypeEl = document.getElementById('sentence-type');
    const refreshSentenceBtn = document.getElementById('refresh-sentence');
    
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    // åˆ‡æ¢æ ‡ç­¾é¡µ
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabId = tab.getAttribute('data-tab');
        
        // æ›´æ–°æ ‡ç­¾é¡µæ¿€æ´»çŠ¶æ€
        tabs.forEach(t => t.classList.remove('active'));
        tabContents.forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        document.getElementById(`${tabId}-tab`).classList.add('active');
      });
    });
    
    // æ›´æ–°ç¬‘è¯ç±»å‹ä¿¡æ¯
    function updateJokeType(type) {
      jokeTypeEl.textContent = `ç±»å‹: ${type || 'æœªçŸ¥'}`;
    }
    
    // æ›´æ–°å¥å­ç±»å‹ä¿¡æ¯
    function updateSentenceType(type) {
      const typeName = typeMap[type] || 'æœªçŸ¥';
      sentenceTypeEl.textContent = `ç±»å‹: ${typeName}`;
    }
    
    // è·å–ç¬‘è¯å†…å®¹å¹¶æ›´æ–°é¡µé¢
    function fetchJokes() {
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      jokeContainer.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½ç¬‘è¯...</div>';
      jokeContainer.classList.remove('error');
      
      var requestOptions = {
        method: 'GET',
        redirect: 'follow'
      };
      
      fetch("https://api.timelessq.com/joke", requestOptions)
        .then(response => response.text())
        .then(result => {
          try {
            // å°è¯•è§£æJSONå“åº”
            const data = JSON.parse(result);
            let jokeText = '';
            let jokeType = '';
            
            // æ ¹æ®è¿”å›çš„æ•°æ®ç»“æ„æå–contentå­—æ®µå’Œtypeå­—æ®µ
            if (data.data && data.data.content) {
              jokeText = data.data.content;
              jokeType = data.data.type || '';
            } else if (data.content) {
              jokeText = data.content;
              jokeType = data.type || '';
            } else {
              jokeText = result;
            }
            
            if (jokeText) {
              jokeContainer.innerHTML = `
                <div class="joke-item">
                  ${jokeText}
                </div>
              `;
            } else {
              jokeContainer.innerHTML = '<div class="joke-item">æš‚æ—¶æ²¡æœ‰ç¬‘è¯äº†ï¼Œç¨åå†è¯•~</div>';
            }
            
            // æ›´æ–°ç±»å‹ä¿¡æ¯
            updateJokeType(jokeType);
          } catch (e) {
            // å¦‚æœä¸æ˜¯JSONæ ¼å¼ï¼Œåˆ™ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬å†…å®¹
            jokeContainer.innerHTML = `
              <div class="joke-item">
                ${result}
              </div>
            `;
            
            // æ›´æ–°ç±»å‹ä¿¡æ¯
            updateJokeType('æœªçŸ¥');
          }
        })
        .catch(error => {
          console.log('è·å–ç¬‘è¯å¤±è´¥:', error);
          jokeContainer.innerHTML = '<div class="joke-item error">è·å–ç¬‘è¯å¤±è´¥ï¼Œè¯·ç¨åå†è¯•~</div>';
        });
    }
    
    // è·å–å¥å­å†…å®¹å¹¶æ›´æ–°é¡µé¢
    function fetchSentence() {
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      sentenceContainer.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½å¥å­...</div>';
      sentenceContainer.classList.remove('error');
      
      var requestOptions = {
        method: 'GET',
        redirect: 'follow'
      };
      
      fetch("https://api.timelessq.com/sentence", requestOptions)
        .then(response => response.text())
        .then(result => {
          try {
            // å°è¯•è§£æJSONå“åº”
            const data = JSON.parse(result);
            let sentenceText = '';
            let authorText = '';
            let sentenceType = '';
            let fromText = ''; // æ¥æºä¿¡æ¯
            
            // æ ¹æ®è¿”å›çš„æ•°æ®ç»“æ„æå–å­—æ®µ
            if (data.data && data.data.hitokoto) {
              sentenceText = data.data.hitokoto;
              authorText = data.data.from_who || '';
              sentenceType = data.data.type || '';
              fromText = data.data.from || ''; // æå–æ¥æºä¿¡æ¯
            } else if (data.hitokoto) {
              sentenceText = data.hitokoto;
              authorText = data.from_who || '';
              sentenceType = data.type || '';
              fromText = data.from || ''; // æå–æ¥æºä¿¡æ¯
            } else {
              sentenceText = result;
            }
            
            // æ˜¾ç¤ºå¥å­
            let html = `<div class="sentence-item">
                          <div class="sentence-content">${sentenceText}</div>`;
                          
            if (authorText) {
              html += `<div class="author">â€”â€” ${authorText}</div>`;
            } else {
              html += `<div class="author">â€”â€” åŒ¿å</div>`;
            }
            
            // æ·»åŠ æ¥æºä¿¡æ¯æ˜¾ç¤º
            if (fromText) {
              html += `<div class="source">å‡ºå¤„: ${fromText}</div>`;
            }
            
            html += `</div>`;
            
            sentenceContainer.innerHTML = html;
            
            // æ›´æ–°ç±»å‹ä¿¡æ¯
            updateSentenceType(sentenceType);
          } catch (e) {
            // å¦‚æœä¸æ˜¯JSONæ ¼å¼ï¼Œåˆ™ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬å†…å®¹
            sentenceContainer.innerHTML = `
              <div class="sentence-item">
                <div class="sentence-content">${result}</div>
                <div class="author">â€”â€” åŒ¿å</div>
              </div>
            `;
            
            // æ›´æ–°ç±»å‹ä¿¡æ¯
            updateSentenceType('æœªçŸ¥');
          }
        })
        .catch(error => {
          console.log('è·å–å¥å­å¤±è´¥:', error);
          sentenceContainer.innerHTML = '<div class="sentence-item error">è·å–å¥å­å¤±è´¥ï¼Œè¯·ç¨åå†è¯•~</div>';
        });
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåè·å–å†…å®¹
    document.addEventListener('DOMContentLoaded', function() {
      fetchJokes();
      fetchSentence();
      
      // ç»‘å®šåˆ·æ–°æŒ‰é’®äº‹ä»¶
      refreshJokeBtn.addEventListener('click', fetchJokes);
      refreshSentenceBtn.addEventListener('click', fetchSentence);
    });
  </script>
</body>
</html>
